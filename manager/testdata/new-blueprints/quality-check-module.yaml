apiVersion: app.m4d.ibm.com/v1alpha2
kind: M4DModule
metadata:
  name: quality-check-conf
  namespace: m4d-system
  labels:
    version: 0.0.1
    name: quality-check-conf
spec:
  chart:
    name: ghcr.io/mesh-for-data/m4d-quality-check-conf:0.1.0
  statusIndicators: # Indicators for a K8s job
  capabilities:
  - capability: quality-check
    scope: dataset
    sources:
    - protocol: s3
      dataformat: parquet
    - protocol: m4d-arrow-flight
      dataformat: arrow
    sinks:
    - protocol: s3
      dataformat: csv
    # The quality check could check various property and produce different
    # statistics. Thus the output could also be manifold. Statistics could be written to WKC or Kafka.
    - protocol: wkc
      dataformat: plaintext
    - protocol: kafka
      dataformat: json
  api:
    endpoint:
      host: prometheus-ip  # This can e.g. be used for multi-user services
      selector: "mod: common-prometheus-service" # Can be set for multi-user services
      port: 9090 # Mandatory for each service
      protocol: HTTP
